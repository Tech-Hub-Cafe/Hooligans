generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  id                    Int                  @id @default(autoincrement())
  email                 String               @unique @db.VarChar(255)
  password              String?              @db.VarChar(255)
  name                  String?              @db.VarChar(255)
  phone                 String?              @db.VarChar(50)
  image                 String?
  provider              String               @default("credentials") @db.VarChar(50)
  created_at            DateTime             @default(now()) @db.Timestamp(6)
  is_admin              Boolean              @default(false)
  orders                Order[]
  password_reset_tokens PasswordResetToken[]

  @@index([email])
  @@map("users")
}

model MenuItem {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(255)
  description String?
  price       Decimal  @db.Decimal(10, 2)
  category    String   @db.VarChar(50)
  image_url   String?
  available   Boolean  @default(true)
  created_at  DateTime @default(now()) @db.Timestamp(6)

  @@index([category])
  @@index([available])
  @@map("menu_items")
}

model Order {
  id                   Int       @id @default(autoincrement())
  customer_name        String    @db.VarChar(255)
  customer_email       String    @db.VarChar(255)
  customer_phone       String?   @db.VarChar(50)
  items                Json
  total                Decimal   @db.Decimal(10, 2)
  status               String    @default("pending") @db.VarChar(50)
  special_instructions String?
  user_id              Int?
  square_payment_id    String?   @db.VarChar(255)
  created_at           DateTime  @default(now()) @db.Timestamp(6)
  updated_at           DateTime? @updatedAt @db.Timestamp(6)
  user                 User?     @relation(fields: [user_id], references: [id], onUpdate: NoAction)

  @@index([user_id])
  @@index([status])
  @@index([created_at])
  @@map("orders")
}

model CafeSettings {
  id                              Int       @id @default(autoincrement())
  cafe_name                       String?   @default("Hooligans") @db.VarChar(255)
  tagline                         String?   @db.VarChar(500)
  description                     String?
  address                         String?   @db.VarChar(500)
  phone                           String?   @db.VarChar(50)
  email                           String?   @db.VarChar(255)
  monday_hours                    String?   @default("7am - 8pm") @db.VarChar(100)
  tuesday_hours                   String?   @default("7am - 8pm") @db.VarChar(100)
  wednesday_hours                 String?   @default("7am - 8pm") @db.VarChar(100)
  thursday_hours                  String?   @default("7am - 8pm") @db.VarChar(100)
  friday_hours                    String?   @default("7am - 8pm") @db.VarChar(100)
  saturday_hours                  String?   @default("8am - 9pm") @db.VarChar(100)
  sunday_hours                    String?   @default("8am - 9pm") @db.VarChar(100)
  monday_food_ordering_hours      String?   @db.VarChar(100)
  tuesday_food_ordering_hours     String?   @db.VarChar(100)
  wednesday_food_ordering_hours   String?   @db.VarChar(100)
  thursday_food_ordering_hours    String?   @db.VarChar(100)
  friday_food_ordering_hours      String?   @db.VarChar(100)
  saturday_food_ordering_hours    String?   @db.VarChar(100)
  sunday_food_ordering_hours      String?   @db.VarChar(100)
  monday_drinks_ordering_hours    String?   @db.VarChar(100)
  tuesday_drinks_ordering_hours   String?   @db.VarChar(100)
  wednesday_drinks_ordering_hours String?   @db.VarChar(100)
  thursday_drinks_ordering_hours  String?   @db.VarChar(100)
  friday_drinks_ordering_hours    String?   @db.VarChar(100)
  saturday_drinks_ordering_hours  String?   @db.VarChar(100)
  sunday_drinks_ordering_hours    String?   @db.VarChar(100)
  facebook_url                    String?   @db.VarChar(500)
  instagram_url                   String?   @db.VarChar(500)
  twitter_url                     String?   @db.VarChar(500)
  tiktok_url                      String?   @db.VarChar(500)
  timezone                        String    @default("Australia/Sydney") @db.VarChar(100)
  updated_at                      DateTime? @updatedAt @db.Timestamp(6)

  @@map("cafe_settings")
}

model DisabledMenuItem {
  id         Int      @id @default(autoincrement())
  square_id  String   @unique @db.VarChar(255)
  created_at DateTime @default(now()) @db.Timestamp(6)

  @@index([square_id])
  @@map("disabled_menu_items")
}

model DisabledCategory {
  id            Int      @id @default(autoincrement())
  category_name String   @unique @db.VarChar(255)
  created_at    DateTime @default(now()) @db.Timestamp(6)

  @@index([category_name])
  @@map("disabled_categories")
}

model PasswordResetToken {
  id         Int      @id @default(autoincrement())
  token      String   @unique @db.VarChar(255)
  user_id    Int
  expires_at DateTime @db.Timestamp(6)
  used       Boolean  @default(false)
  created_at DateTime @default(now()) @db.Timestamp(6)
  user       User     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([token])
  @@index([user_id])
  @@index([expires_at])
  @@map("password_reset_tokens")
}
